---
import { getCollection } from "astro:content";

const categories = await getCollection("category");
const products = await getCollection("product");
---

<!-- TODO: Check responsiveness -->
<section class="grid grid-rows-[auto_minmax(0,_1fr)] w-full gap-4">
  <div class="grid grid-cols-1 lg:grid-cols-2">
    <h2 class="p-4 lg:p-0 text-2xl uppercase self-center">
      Productos Destacados
    </h2>
    <div
      class="grid grid-cols-2 sm:grid-cols-5 lg:overflow-hidden gap-2 text-sm text-secondary"
    >
      {
        categories.map((i) => (
          <span
            id={`category-button-${i.slug}`}
            class="flex justify-center break-words py-2 px-4 cursor-pointer hover:border-b-2 hover:border-b-primary hover:bg-primary hover:text-white rounded-md"
          >
            {i.data.pluralName}
          </span>
        ))
      }
    </div>
  </div>
  <div
    class="py-2 grid gap-4 grid-flow-col grid-cols-[repeat(auto-fit,_minmax(16rem,_1fr))] auto-cols-[minmax(16rem,_1fr)] overflow-x-auto"
  >
    {
      products.map((i) => (
        <article class="flex flex-col gap-2 p-4 border rounded-lg border-secondary cursor-pointer">
          <div class="h-44 w-full bg-slate-200" />
          <h3 class="capitalize">{i.data.name}</h3>
        </article>
      ))
    }
  </div>
</section>
